{% extends "base.html" %}

{% block content %}
<div class="new-main">
    <div class="choose-feed"></div>
    <div class="main-content">
        {% if posts|length == 0 %}
        No posts
        {% else %}
            <meta name="csrf-token" content="{{ csrf_token() }}">
            <!-- Get the dictionary containing data, then loop through everything in the correct post_id-->
            {% for post_id, post_data in posts.items() %}
                <div class="post-container">
                    <div class="left-container">

                        <div class="username-container">
                            {{ post_data.username }}
                        </div>
                        <div class="content-container">
                            {{ post_data.content}}
                        </div>
                        <div class="hashtag-container">
                            <!-- All the hashtags for a post in an array, so loop through it and print them out together -->
                            {% for hashtag in post_data.hashtags %}
                                {% if post_data.hashtags|length > 1 and (loop.index != 0 and loop.index != post_data.hashtags|length) %}
                                    <span class="hashtag"><button>#{{ hashtag }},</button></span>
                                {% else %}
                                    <span class="hashtag"><button>#{{ hashtag }}</button></span>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <a class="vote" id="{{ post_id }}">
                            {% if liked_posts[post_id] == True %}
                                <i class="fas fa-thumbs-up" id="up"></i><span id="sup"> {{ post_data.upvotes }}</span></a>
                            {% else %}
                                <i class="far fa-thumbs-up" id="up"></i><span id="sup"> {{ post_data.upvotes }}</span></a>
                            {% endif %}
                    </div>
                    <div class="right-container">
                        
                    </div>
                </div>
            {% endfor %}
            <!-- Get the user_id in posts table, then use this to get the username from Users table with that user_id-->
        {% endif %}
        <div class="post">
            <button type="button" class="btn btn-primary"><a class='register-link' href="/post">Post</a></button>
          
        </div>
    </div>
</div>
{% endblock %}